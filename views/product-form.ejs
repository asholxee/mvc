<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <title>
    <%= product ? 'Редактировать товар' : 'Добавить товар' %>
  </title>
</head>

<body>
  <h1>
    <%= product ? 'Редактировать товар' : 'Добавить товар' %>
  </h1>
  <form method="POST" action="/product<%= product ? '/' + product.id : '' %>">
    <label>
      Название:
      <input type="text" name="name" required value="<%= product ? product.name : '' %>">
    </label><br><br>
    <label>
      Цена:
      <input type="number" step="0.01" name="price" required value="<%= product ? product.price : '' %>">
    </label><br><br>
    <label>
      Категория:
      <select name="categoryId" required>
        <% categories.forEach(cat=> { %>
          <option value="<%= cat.id %>" <%=product && product.CategoryId===cat.id ? 'selected' : '' %>><%= cat.name %>
          </option>
          <% }) %>
      </select>
    </label><br><br>
    <label>
      Поставщик:
      <select name="supplierId" required>
        <% suppliers.forEach(sup=> { %>
          <option value="<%= sup.id %>" <%=product && product.SupplierId===sup.id ? 'selected' : '' %>><%= sup.name %>
          </option>
          <% }) %>
      </select>
    </label><br><br>
    <button type="submit">
      <%= product ? 'Обновить' : 'Добавить' %>
    </button>
  </form>
  <button onclick="window.location.href='/'">Назад</button>
</body>

</html>